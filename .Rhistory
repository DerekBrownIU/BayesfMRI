<<<<<<< HEAD
install.packages('roxygen2')
install.packages('roxygen2md')
library(roxygen2)
library(roxygen2md)
usethis::use_roxygen_md()
roxygenize()
library(BayesfMRI)
install.packages('roxygen2')
install.packages('roxygen2md')
library(roxygen2)
library(roxygen2md)
usethis::use_roxygen_md()
roxygenize()
install.packages('roxygen2')
install.packages('roxygen2md')
library(roxygen2)
library(roxygen2md)
usethis::use_roxygen_md()
roxygenize()
=======
>>>>>>> 8aa346d009d43f8f3248168457209aff0b6548c9
library(BayesfMRI)
library(BayesfMRI)
library(BayesfMRI)
# Libraries needed
library(INLA)
# devtools::install_github("mandymejia/BayesfMRI")
library(BayesfMRI)
library(geometry)
library(rdist)
library(Matrix)
# Working directories
wd_ts <- '/Users/sarahryan/Desktop/StuffWithMandy/'
wd_z <- '/Users/sarahryan/Desktop/StuffWithMandy/'
wd_spde <- '/Users/sarahryan/Desktop/StuffWithMandy/'
# Select subcortical region and load spde object
value = 3
spde_obj <- readRDS(paste0(wd_spde, 'spde_subcortical', value, '.RDS'))
# Select subject and read in data
id <- '100307'
dat <- t(read.csv(paste0(wd_ts, 'tseries.',id,'.csv')))
Z <- read.csv(paste0(wd_z, 'designmat.',id,'.csv'))
lab <- read.csv(paste0(wd_z, 'labels.100307.csv'))
# Build session data
Z <- as.matrix(Z)
# Z <- Z[,1:2]
data <- dat[,lab == value]
# Z <- Z[1:100, ]
session <- list(BOLD = data, design = Z)
is.session(session)
data <- list(single_session = session)
# Now run the model
result <- BayesGLM_vol3D(data = data, spde_obj = spde_obj) ## bbeta1 is not found.... why???? I thought I fixed this before. Look into it.
library(BayesfMRI)
# Now run the model
result <- BayesGLM_vol3D(data = data, spde_obj = spde_obj) ## bbeta1 is not found.... why???? I thought I fixed this before. Look into it.
View(spde_obj)
View(data)
View(Z)
View(dat)
View(lab)
lab <- read.csv(paste0(wd_z, 'labels.100307.csv'), header = FALSE)
colnames(dat)
dim(dat)
rownames(dat)
dat <- t(read.csv(paste0(wd_ts, 'tseries.',id,'.csv'), header = FALSE))
rownames(dat)
colnames(dat)
View(dat)
Z <- read.csv(paste0(wd_z, 'designmat.',id,'.csv'))
View(Z)
lab <- read.csv(paste0(wd_z, 'labels.100307.csv'), header = FALSE)
# Build session data
Z <- as.matrix(Z)
# Z <- Z[,1:2]
data <- dat[,lab == value]
# Z <- Z[1:100, ]
session <- list(BOLD = data, design = Z)
is.session(session)
data <- list(single_session = session)
# Now run the model
result <- BayesGLM_vol3D(data = data, spde_obj = spde_obj) ## bbeta1 is not found.... why???? I thought I fixed this before. Look into it.
library(BayesfMRI)
# Libraries needed
library(INLA)
# devtools::install_github("mandymejia/BayesfMRI")
library(BayesfMRI)
library(geometry)
library(rdist)
library(Matrix)
# Working directories
wd_ts <- '/Users/sarahryan/Desktop/StuffWithMandy/'
wd_z <- '/Users/sarahryan/Desktop/StuffWithMandy/'
wd_spde <- '/Users/sarahryan/Desktop/StuffWithMandy/'
# Select subcortical region and load spde object
value = 3
spde_obj <- readRDS(paste0(wd_spde, 'spde_subcortical', value, '.RDS'))
# Select subject and read in data
id <- '100307'
dat <- t(read.csv(paste0(wd_ts, 'tseries.',id,'.csv'), header = FALSE))
Z <- read.csv(paste0(wd_z, 'designmat.',id,'.csv'))
lab <- read.csv(paste0(wd_z, 'labels.100307.csv'), header = FALSE)
View(Z)
Z <- Z[,1:2]
lab <- read.csv(paste0(wd_z, 'labels.100307.csv'), header = FALSE)
# Build session data
Z <- as.matrix(Z)
data <- dat[,lab == value]
rm(dat, lab)
session <- list(BOLD = data, design = Z)
is.session(session)
data <- list(single_session = session)
# Now run the model... note: if issues with bbeta1 check dimension of spde object and bold design (number of voxels should match with length of idx loc)
result <- BayesGLM_vol3D(data = data, spde_obj = spde_obj)
View(result)
# Now run the model...
# note: if issues with bbeta1 check dimension of spde object and bold design (number of voxels should match with length of idx loc)
# note: did not converge when I used the entire Z matrix.
of <- paste0(wd_outfile, 'inla_', id, '_region',value,'.RDS')
wd_outfile <- '/Users/sarahryan/Desktop/StuffWithMandy/'
# Now run the model...
# note: if issues with bbeta1 check dimension of spde object and bold design (number of voxels should match with length of idx loc)
# note: did not converge when I used the entire Z matrix.
of <- paste0(wd_outfile, 'inla_', id, '_region',value,'.RDS')
# Now run the model...
# note: if issues with bbeta1 check dimension of spde object and bold design (number of voxels should match with length of idx loc)
# note: did not converge when I used the entire Z matrix.
of <- paste0(wd_outfile, 'inla_region',value,'_',id,'.RDS')
result <- BayesGLM_vol3D(data = data, spde_obj = spde_obj, outfile = of)
View(result)
plot(x = 1:75, y = result$theta_posteriors$Theta1.for.bbeta1.x, type = 'l')
plot(x = 1:75, y = result$theta_posteriors$Theta1.for.bbeta1.y, type = 'l')
plot(x = 1:75, y = result$theta_posteriors$Theta2.for.bbeta1.y, type = 'l')
plot(x = 1:75, y = result$theta_posteriors$Theta2.for.bbeta1.x, type = 'l')
plot(x = 1:75, y = result$theta_posteriors$Theta2.for.bbeta2.x, type = 'l')
